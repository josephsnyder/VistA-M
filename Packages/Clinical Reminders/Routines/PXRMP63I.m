PXRMP63I ;SLC/PKR - Inits for PXRM*2.0*63. ;02/03/2016
 ;;2.0;CLINICAL REMINDERS;**63**;Feb 04, 2005;Build 243
 ;==========================================
PRE ;Pre-init
 ;Disable options and protocols
 N P47I
 S P47I=$$PATCH^XPDUTL("PXRM*2.0*47")
 I 'P47I D
 . D OPTION^PXRMUTIL("DISABLE")
 . D PROTOCOL^PXRMUTIL("DISABLE")
 I P47I D
 . D OPTIONS^PXRMUTIL("DISABLE","INSTALL OF PXRM*2.0*63")
 . D PROTCOLS^PXRMUTIL("DISABLE","INSTALL OF PXRM*2.0*63")
 D DELEXE^PXRMEXSI("EXARRAY","PXRMP63E")
 D RENAME
 Q
 ;
 ;==========================================
POST ;Post-init
 ;Enable options and protocols
 N P47I
 S P47I=$$PATCH^XPDUTL("PXRM*2.0*47")
 I 'P47I D
 . D OPTION^PXRMUTIL("ENABLE")
 . D PROTOCOL^PXRMUTIL("ENABLE")
 I P47I D
 . D OPTIONS^PXRMUTIL("ENABLE","INSTALL OF PXRM*2.0*63")
 . D PROTCOLS^PXRMUTIL("ENABLE","INSTALL OF PXRM*2.0*63")
 D SETPVER^PXRMUTIL("2.0P63")
 ;Install Exchange File entries.
 D SMEXINS^PXRMEXSI("EXARRAY","PXRMP63E")
 D SENDIM^PXRMP63I
 Q
 ;
 ;==========================================
RENAME ;Rename various components replacing assessment with screen.
 D RENAME^PXRMUTIL(801.41,"VA-HEPATITIS C RISK ASSESSMENT","VA-HEPATITIS C RISK SCREEN")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT DECLINED","VA-HEP C RISK SCREEN DECLINED")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT HEADER","VA-HEP C RISK SCREEN HEADER")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT NON PRESENT","VA-HEP C RISK SCREEN NON PRESENT")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT OPTIONS","VA-HEP C RISK SCREEN OPTIONS")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT PRESENT","VA-HEP C RISK SCREEN PRESENT")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT RISK FACTOR LIST","VA-HEP C RISK SCREEN RISK FACTOR LIST")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT RISK FACTOR LIST OPTION","VA-HEP C RISK SCREEN RISK FACTOR LIST OPTION")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT TESTING HEADER","VA-HEP C RISK SCREEN TESTING HEADER")
 D RENAME^PXRMUTIL(801.41,"VA-HEP C RISK ASSMNT TEXT","VA-HEP C RISK SCREEN TEXT")
 ;
 D RENAME^PXRMUTIL(811.5,"VA-BL HEP C RISK ASSMNT ORDERS OPTION","VA-BL HEP C RISK SCREEN ORDERS OPTION")
 D RENAME^PXRMUTIL(811.5,"VA-HEPATITIS C RISK ASSESSMENT","VA-HEPATITIS C RISK SCREEN")
 D RENAME^PXRMUTIL(811.9,"VA-HEPATITIS C RISK ASSESSMENT","VA-HEPATITIS C RISK SCREEN")
 Q
 ;
 ;==========================================
SENDIM ;Send install message.
 N FROM,NODE,PARAM,SYSTEM,SUBJECT,TO,VALUE
 S NODE="PXRM*2.0*63"
 K ^TMP(NODE,$J)
 ;DBIA #1131 for ^XMB("NETNAME")
 S FROM="PXRM*2.0*63 Install@"_^XMB("NETNAME")
 ;DBIA #2541
 S SYSTEM=$$KSP^XUPARAM("WHERE")
 I $$PROD^XUPROD(1) S TO("G.CLINICAL REMINDERS SUPPORT@DOMAIN.EXT")=""
 E  D
 . N MGIEN,MGROUP
 . S MGIEN=$G(^PXRM(800,1,"MGFE"))
 . S MGROUP=$S(MGIEN'="":"G."_$$GET1^DIQ(3.8,MGIEN,.01),1:DUZ)
 . S TO(MGROUP)=""
 S SUBJECT="Install of PXRM*2.0*63"
 S ^TMP(NODE,$J,1,0)="PXRM*2.0*63 has been installed."
 S ^TMP(NODE,$J,2,0)="System is "_SYSTEM
 D SEND^PXRMMSG(NODE,SUBJECT,.TO,FROM)
 Q
 ;
 ;==========================================
TAXLIST(LIST) ;Populate the list of taxonomies to inactivate.
 S LIST("VA-IM FLU H1N1 (1 DOSE)")=""
 Q
 ;
