TIUEDS6 ; ;04/07/16
 ;;
1 N X,X1,X2 S DIXR=247 D X1(U) K X2 M X2=X D X1("F") K X1 M X1=X
 I $G(X(1))]"",$G(X(2))]"",$G(X(3))]"",$G(X(4))]"" D
 . K ^TIU(8925,"ADIV",X(1),X(2),X(3),X(4),DA)
 K X M X=X2 I $G(X(1))]"",$G(X(2))]"",$G(X(3))]"",$G(X(4))]"" D
 . S ^TIU(8925,"ADIV",X(1),X(2),X(3),X(4),DA)=""
 Q
X1(DION) K X
 S X(1)=$G(@DIEZTMP@("V",8925,DIIENS,1212,DION),$P($G(^TIU(8925,DA,12)),U,12))
 S X(2)=$G(@DIEZTMP@("V",8925,DIIENS,.01,DION),$P($G(^TIU(8925,DA,0)),U,1))
 S X(3)=$G(@DIEZTMP@("V",8925,DIIENS,.05,DION),$P($G(^TIU(8925,DA,0)),U,5))
 S X=$G(@DIEZTMP@("V",8925,DIIENS,1301,DION),$P($G(^TIU(8925,DA,13)),U,1))
 I $D(X)#2 S X=9999999-X
 S:$D(X)#2 X(4)=X
 S X=$G(X(1))
 Q
2 N X,X1,X2 S DIXR=557 D X2(U) K X2 M X2=X D X2("F") K X1 M X1=X
 I $G(X(1))]"",$G(X(2))]"" D
 . K ^TIU(8925,"VBC",$E(X(1),1,14),$E(X(2),1,6),DA)
 K X M X=X2 I $G(X(1))]"",$G(X(2))]"" D
 . S ^TIU(8925,"VBC",$E(X(1),1,14),$E(X(2),1,6),DA)=""
 Q
X2(DION) K X
 S X(1)=$G(@DIEZTMP@("V",8925,DIIENS,1201,DION),$P($G(^TIU(8925,DA,12)),U,1))
 S X(2)=$G(@DIEZTMP@("V",8925,DIIENS,1801,DION),$P($G(^TIU(8925,DA,18)),U,1))
 S X=$G(X(1))
 Q
3 N X,X1,X2 S DIXR=1329 D X3(U) K X2 M X2=X D X3("F") K X1 M X1=X
 D
 . N DIEZCOND,DIEXARR M DIEXARR=X S DIEZCOND=1
 . S X=(X2(1)="")
 . S DIEZCOND=$G(X) K X M X=DIEXARR Q:'DIEZCOND
 . D DOC^TIUDDX
 K X M X=X2 D
 . N DIEZCOND,DIEXARR M DIEXARR=X S DIEZCOND=1
 . S X=(X2(12)'="")
 . S DIEZCOND=$G(X) K X M X=DIEXARR Q:'DIEZCOND
 . D DOC^TIUDDX
 Q
X3(DION) K X
 S X(1)=$G(@DIEZTMP@("V",8925,DIIENS,.01,DION),$P($G(^TIU(8925,DA,0)),U,1))
 S X(2)=$G(@DIEZTMP@("V",8925,DIIENS,.05,DION),$P($G(^TIU(8925,DA,0)),U,5))
 S X(3)=$G(@DIEZTMP@("V",8925,DIIENS,.06,DION),$P($G(^TIU(8925,DA,0)),U,6))
 S X(4)=$G(@DIEZTMP@("V",8925,DIIENS,.07,DION),$P($G(^TIU(8925,DA,0)),U,7))
 S X(5)=$G(@DIEZTMP@("V",8925,DIIENS,.08,DION),$P($G(^TIU(8925,DA,0)),U,8))
 S X(6)=$G(@DIEZTMP@("V",8925,DIIENS,1202,DION),$P($G(^TIU(8925,DA,12)),U,2))
 S X(7)=$G(@DIEZTMP@("V",8925,DIIENS,1205,DION),$P($G(^TIU(8925,DA,12)),U,5))
 S X(8)=$G(@DIEZTMP@("V",8925,DIIENS,1301,DION),$P($G(^TIU(8925,DA,13)),U,1))
 S X(9)=$G(@DIEZTMP@("V",8925,DIIENS,1405,DION),$P($G(^TIU(8925,DA,14)),U,5))
 S X(10)=$G(@DIEZTMP@("V",8925,DIIENS,1701,DION),$P($G(^TIU(8925,DA,17)),U,1))
 S X(11)=$G(@DIEZTMP@("V",8925,DIIENS,2101,DION),$P($G(^TIU(8925,DA,21)),U,1))
 S X(12)=$G(@DIEZTMP@("V",8925,DIIENS,.02,DION),$P($G(^TIU(8925,DA,0)),U,2))
 S X=$G(X(1))
 Q
